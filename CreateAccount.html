<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <link rel="stylesheet" href="newAccount/accountStyle.css">
</head>
<body>
    <header>
        <h1 class="mainIcon"><a href="main.html">Tesla</a></h1>
    </header>
    <div class="mainDiv">
        <div class="firstDiv">
            <h1>Create your Tesla Account</h1>
            <div class="input-group mb-3">
                <input id="first_name" type="text" class="form-control" placeholder="First Name" aria-label="Username">
                <input id="last_name" type="text" class="form-control" placeholder="Last Name" aria-label="Server">
            </div>

            <div class="input-group mb-3 d-flex">
                <input id="email"  type="text" class="form-control" placeholder="Username" aria-label="Username" aria-describedby="basic-addon1">
                <span class="input-group-text" id="basic-addon2">@gmail.com</span>
            </div>
            <p>You can use letters, numbers & periods</p>

            <div class="input-group mb-3">
                <input id="password" type="password" class="form-control" placeholder="Password" aria-label="Recipient's username" aria-describedby="basic-addon2">
                <input id="password2" type="password" class="form-control" placeholder="Confirm" aria-label="Recipient's username" aria-describedby="basic-addon2">
            </div>
            <p id="message"></p>
            <a href="account.html"><button type="button" class="btn btn-outline-danger">Cancel</button></a>
            <a id="access"><button onclick="result()" type="button" class="btn btn-outline-success">Register</button></a>
        </div>

        <div class="image">
            <img class="imageSize" src="newAccount/download.png" alt="Tesla">
        </div>
    </div>
    <footer>
        <p>Tesla 2021 Privacy contract</p>
    </footer>
</body>
<script>
    var myObj, myJSON, text, obj;


    const first_name = document.getElementById("first_name")
    const last_name = document.getElementById("last_name")
    const email = document.getElementById("email")

    const password = document.getElementById("password")
    const confirm_password = document.getElementById("password2")

    const message = document.getElementById("message")

    const access = document.getElementById("access")


    function result() {
        if (checkForEmpty(first_name) && checkForEmpty(last_name) && checkForEmpty(email)
            && checkForEmpty(password) && checkForEmpty(confirm_password) &&
            password.value.toString() === confirm_password.value.toString()) {
            console.log("1" + first_name)
            myObj = {
                firstName: first_name.value.toString(),
                lastName: last_name.value.toString(),
                pass: password.value.toString(),
                e: email.value.toString()
            }
            myJSON = JSON.stringify(myObj);
            localStorage.setItem("account", myJSON);

            text = localStorage.getItem("account");
            obj = JSON.parse(text);
            console.log("2" + obj.firstName)
        }
        else {
            message.innerText = "Invalid registration"
            message.style.color = "red"
        }

    }

    function checkForEmpty(value) {
        return value.value.toString().length !== 0;
    }

</script>
</html>